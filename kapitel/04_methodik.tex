\chapter{Daten und Methodik der Evaluation}

\section{Identifizierung von Use Cases}

\section{Evaluation eines Retrieval-Augmented-Generation-Chatbots}

\subsection{Stand der Forschung}

\subsection{Evaluationskonzept}

\subsubsection{Umsetzung RAGAS}

\textbf{Methodischer Rahmen}

Zur automatisierten Evaluation des Retrieval-Augmented-Generation-Systems wurde das Framework RAGAS in der Version 0.3.8 eingesetzt. RAGAS ist ein referenzfreies Evaluationsframework für RAG-Systeme, das verschiedene Qualitätsdimensionen automatisiert bewertet \cite{es2025ragas}. Es ermöglicht die quantitative Bewertung von Antwort- und Retrieval-Qualität, ohne dass manuell erstellte Referenzantworten erforderlich sind.

Die Evaluation wurde als Single-Turn-Setting umgesetzt. Jede Frage wurde unabhängig von vorherigen Interaktionen bewertet, um eine kontrollierte und vergleichbare Analyse der Systemleistung zu gewährleisten. Dieses Vorgehen ist mit der Dokumentation von RAGAS konsistent \cite{ragasdocs}.

Die Evaluationsfragen wurden kuratiert und nicht zufällig generiert. Ziel war es, typische Nutzungsszenarien der Plattform systematisch abzubilden. Die 60 Fragen decken Wissensfragen zu KI-Inhalten, kursbezogene Anfragen, technische Supportfragen sowie Fragen zur Plattformfunktionalität ab.

\bigskip
\textbf{Technische Implementierung und Metrikdefinition}

Die Implementierung orientiert sich an der von RAGAS vorgesehenen Struktur \texttt{SingleTurnSample} \cite{ragasdocs}. Für jede Evaluationsinstanz werden die Nutzerfrage, die generierte Antwort sowie die tatsächlich verwendeten Kontextsegmente an das Framework übergeben.

Als Metriken wurden \textit{Answer Relevancy}, \textit{Context Relevance} und \textit{Faithfulness} eingesetzt \cite{es2025ragas}.

\textit{Answer Relevancy} misst die inhaltliche Passung zwischen Frage und Antwort.  
\textit{Context Relevance} bewertet die Qualität des Retrievals.  
\textit{Faithfulness} überprüft, ob die Antwort durch die bereitgestellten Kontexte gestützt ist.

Die Bewertung erfolgte mit \texttt{gpt-4o} über den \texttt{LangchainLLMWrapper}. Für semantische Ähnlichkeitsberechnungen wurden Embeddings des Modells \texttt{text-embedding-3-small} verwendet. Die Temperatur wurde auf 0 gesetzt.

\bigskip
\textbf{Evaluation der bestehenden und der neuen Version}

In der bestehenden Version basiert die RAG-Pipeline auf einer linearen Architektur. Die extrahierten Kontexte wurden gemeinsam mit der generierten Antwort an RAGAS übergeben.

Die neue Version verwendet eine Klassifikation der Anfrage sowie Single-Hop- oder Multi-Hop-Verfahren. Komplexe Anfragen werden in Teilfragen zerlegt, parallel verarbeitet und anschließend dedupliziert und rerankt.

In beiden Versionen wurden ausschließlich die final ausgewählten Kontexte als \texttt{retrieved\_contexts} an RAGAS übergeben.

\bigskip
\textbf{Mehrfachausführung und Datenaggregation}

Jede Frage wurde fünfmal beantwortet und bewertet. Die Metrikwerte wurden gespeichert und zu Durchschnittswerten aggregiert.

Alle Evaluationsdaten wurden in einer strukturierten JSON-Datei dokumentiert. Ergänzend wurde ein Prüfmechanismus implementiert, der potenziell ungestützte Antworten identifiziert.

\section{Weiterentwicklung eines Retrieval-Augmented-Generation-Chatbots}

\subsection{Anforderungsanlyse}
Die Weiterentwicklung eines RAG-basierten Chatbots ist ebenso wie dessen Evaluation keine triviale Aufgabe. Um eine zielgerichtete Arbeit sicherzustellen, bedarf es einer systematischen Erfassung der Anforderungen, sodass darauf aufbauend konkrete technische Implementierungsschritte definiert und umgesetzt werden können. In diesem Abschnitt wird die Anforderungsanalyse beschrieben, die als Grundlage für die Weiterentwicklung des Chatbots dient. Zuerst werden allgemeine Anforderungen an RAG-basierte Chatbots auf Basis einer Literaturrecherche identifiziert. Der Fokus liegt hier bereits auf dem Bildungskontext. Darauffolgend werden spezifische Anforderungen für die Weiterentwicklung des Chatbots auf Basis der zentralen Stakeholder definiert. Dazu gehören die Nutzer der Plattform, die den Chatbot verwenden, sowie der KI-Campus als Betreiber der Plattform. Damit wird sichergestellt, dass die Weiterentwicklung des Chatbots nicht nur auf theoretischen Überlegungen basiert, sondern auch die praktischen Bedürfnisse und Erwartungen der Nutzer und des Betreibers berücksichtigt.

\subsubsection{Stand der Forschung}
??

\subsubsection{Stakeholder}
Der Einbezug der Stakeholder erfolgt primär durch das Auswerten einer ersten Phase von User Test. Diese wurden im Februar 2025 nach X jährigen Bestehen des Chatbots druchgeführt.
INFOS ZU USER TEST ERFRAGEN
Die Ergebnisse der User Tests ist in Tabelle \ref{tab:usertests}

\begin{table}[htbp]
\centering
\renewcommand{\arraystretch}{1.2}

\begin{tabular}{|>{\raggedright\arraybackslash}m{0.3\textwidth}|>{\raggedright\arraybackslash}m{0.3\textwidth}|>{\raggedright\arraybackslash}m{0.3\textwidth}|}
\hline
\multicolumn{1}{|c|}{\textbf{Hoch}} &
\multicolumn{1}{c|}{\textbf{Mittel}} &
\multicolumn{1}{c|}{\textbf{Niedrig}} \\
\hline
Langsames Antworten & Abbrechen von  Chatanfragen fehlt & Simples Interface \\
\hline
Ausbaufähiges Zitieren & Keine personalisierten Antworten & Level der User unbeachtet \\
\hline
Antwortgenauigkeit \& -qualität & Editieren von Chatanfragen fehlt & Zwei Antworten generieren (siehe ChatGPT)? \\
\hline
Mehrsprachiger Support unzureichend & Keine informellen Lernabfragen & Rolle des Chatbots klar benennen \\
\hline
Unzureichende Persistenz der Konversationen & Beispiele und Use Cases in Antwort einbinden & Kein Hinweis auf Funktionalität Chatbots \\
\hline
User Feedback einbinden (RLHF) & Schlechte No-Answer Logik & Keine Exportfunktion der Chats \\
\hline
Größere Wissensbasis für Antwort & Schwache Outputformatierung & Antworten teils generisch und nicht kontextgetreu \\
\hline
Oberflächliche Zusammenfassungen & Multimodale Informationen nicht eingebunden & Keine KIC Community Info im Chatkontext \\
\hline
Follow-up Fragen fehlen &  &  \\
\hline
\end{tabular}
\caption{Festgestellte Schwachstellen nach Relevanz}
\label{tab:usertests}
\end{table}

\subsubsection{Identifizierte Systemanforderungen}
Auf Basis der durchgeführten Anforderungsanalyse wurden die in Abbildung \ref{fig:systemanforderungen} dargestellten Systemanforderungen für die Weiterentwicklung des RAG-basierten Chatbots identifiziert.
\begin{figure}[h]
    \centering
    \includegraphics[width=0.8\textwidth]{systemanforderungen.png}
    \caption{Identifizierte Systemanforderungen}
    \label{fig:systemanforderungen}
\end{figure}

\subsection{Technische Umsetzung}

\subsubsection{Codeanalyse}

\subsubsection{Erweiterung der Ingestion-Pipeline}
Veit

\subsubsection{Umstellung der Logik}

\begin{figure}[h]
    \centering
    \includegraphics[width=0.9\textwidth]{workflow_neu.png}
    \caption{Neuer Workflow des RAG-basierten Chatbots in LangGraph}
    \label{fig:worklow_neu}
\end{figure}

\subsubsection{Spezifische Anpassungen}

\subsubsection{Begründung ausgelassener Anforderungen}
